(this["webpackJsonptw-road-fix-map"]=this["webpackJsonptw-road-fix-map"]||[]).push([[0],{105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(16),s=n.n(r),o=n(45),i=n(6),l=n(7),d=n.n(l),u=n(9),m=n(5),j=n(20),p=n(0),g=function(e){var t=e.value;return Object(p.jsxs)("div",{className:"cardMini",children:[Object(p.jsxs)("div",{className:"title",children:[Object(p.jsx)("div",{className:"state inlineBlock ".concat("\u662f"===t.workingState?"working":"notWorking"),children:"\u662f"===t.workingState?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"}),Object(p.jsx)("div",{className:"pipeType inlineBlock",children:t.pipeType})]}),Object(p.jsx)("div",{className:"title",children:Object(p.jsxs)("div",{className:"date",children:[Object(p.jsx)("span",{className:"slash",children:t.date.start.year}),Object(p.jsx)("span",{className:"slash",children:t.date.start.month}),Object(p.jsx)("span",{children:t.date.start.day}),Object(p.jsx)("i",{className:"fas fa-caret-right fa-lg"}),Object(p.jsx)("span",{className:"slash",children:t.date.end.year}),Object(p.jsx)("span",{className:"slash",children:t.date.end.month}),Object(p.jsx)("span",{children:t.date.end.day})]})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"item",children:"\u6848\u4ef6\u985e\u5225"}),Object(p.jsx)("div",{className:"data",children:t.constructionType})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"item",children:"\u5de5\u7a0b\u540d\u7a31"}),Object(p.jsx)("div",{className:"data",children:t.title})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"item",children:"\u5730\u9ede"}),Object(p.jsx)("div",{className:"data last",children:t.distriction+t.address})]})]})},f=[{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f0f0f0"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"},{color:"#ec7868"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#3da7a7"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#cccccc"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#f9f9f9"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#83cfe2"}]}],h={fillColor:"#FF7777",fillOpacity:.1,strokeColor:"#FF7777",strokeOpacity:1,strokeWeight:1,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:0},b={styles:[{textSize:14,height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m1.png"},{textSize:14,height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m2.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m3.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m4.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m5.png"}]},v=function(e){var t=Object(a.useState)(60),n=Object(m.a)(t,2),c=n[0],r=n[1],s=e.constructionsData,o=e.mapParameters,i=e.closeInfoBlock,l=e.setMapParameters,d=e.isMobile,u=e.makerMessage,v=e.userLocation,O=Object(a.useRef)(null),x=null!==s&&0!==s.length,k=Object(a.useMemo)((function(){var e=function(e){var t=10*(s.length-1)+s[s.length-1].length;return Array.from({length:t},(function(e,t){return t})).map((function(t){return 0!==s[Math.floor(t/10)][t%10].coordinate.lat&&0!==s[Math.floor(t/10)][t%10].coordinate.lng&&Object(p.jsx)(j.d,{position:{lat:Number(s[Math.floor(t/10)][t%10].coordinate.lat),lng:Number(s[Math.floor(t/10)][t%10].coordinate.lng)},onClick:function(){return function(e){var t=s[Math.floor(e/10)][e%10],n=O.current.getCenter().toJSON();l({center:n,polygon:t.coordinate.polygon,zoom:o.zoom,selectMarker:t,closeInfoWindow:!1})}(t)},clusterer:e,noClustererRedraw:!0,icon:"\u662f"===s[Math.floor(t/10)][t%10].workingState?{url:"/tw_road_fix_map/img/marker/cone.png",scaledSize:{width:37,height:37}}:{url:"/tw_road_fix_map/img/marker/cone_gray.png",scaledSize:{width:37,height:37}}},"marker_"+t)}))};return x&&Object(p.jsx)(j.e,{averageCenter:!0,options:b,gridSize:c,children:function(t){return e(t)}},"markerClusterer")}),[s,x,c,o,l]);return Object(p.jsxs)("div",{className:"mapContainer",children:[Object(p.jsx)("div",{id:"mapCover",className:"mapCover ".concat(null===s?"open":d?null===i&&null===u?"close":!1===i||!0===u?"open":!0===i||!1===u?"close":void 0:"close")}),Object(p.jsx)(j.c,{googleMapsApiKey:"AIzaSyB9zIkabAHoudMDAwbKom6URgjmUuejEpo",children:Object(p.jsxs)(j.a,{mapContainerStyle:{width:"100%",height:"inherit"},zoom:o.zoom,center:o.center,options:{styles:f,minZoom:11,maxZoom:20,disableDefaultUI:!0},onLoad:function(e){!function(e){O.current=e}(e)},onZoomChanged:function(){var e=null;!O.current||O.current.zoom<=18?e=60:O.current.zoom>18&&(e=1),r(e)},children:[k,null!==v&&Object(p.jsx)(j.d,{position:v,zIndex:100},"userLocation"),function(){var e=!1;return!0===o.closeInfoWindow?e=!1:null!==o.selectMarker&&(e=!0),e}()&&Object(p.jsx)(j.b,{position:{lat:o.selectMarker.coordinate.lat,lng:o.selectMarker.coordinate.lng},options:{pixelOffset:new window.google.maps.Size(0,-45)},onCloseClick:function(){l({center:o.center,polygon:o.polygon,zoom:o.zoom,selectMarker:null,closeInfoWindow:!0})},children:Object(p.jsx)(g,{value:o.selectMarker})}),o.polygon&&Object(p.jsx)(j.f,{path:o.polygon,options:h})]})})]})},O=function(e){var t=e.value,n=Object(a.useState)(!0),c=Object(m.a)(n,2),r=c[0],s=c[1],o=e.setMapParameters;return"loading"===t?Object(p.jsx)("div",{className:"card loading",children:Object(p.jsx)("div",{children:"Loading..."})}):Object(p.jsxs)("div",{className:"card",children:[Object(p.jsxs)("div",{className:"card-meta",children:[Object(p.jsxs)("div",{className:"card-meta-title",children:[Object(p.jsx)("div",{className:"highlighter bgColor_mintGreen-light",style:{width:t.pipeType.length+"em"}}),Object(p.jsx)("div",{className:"state unselectable ".concat("\u662f"===t.workingState?"working":"notWorking"),children:"\u662f"===t.workingState?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"}),Object(p.jsx)("div",{className:"pipeType",style:{position:"relative"},children:t.pipeType})]}),Object(p.jsxs)("div",{className:"card-meta-basicInfo",children:[Object(p.jsxs)("div",{className:"date",children:[Object(p.jsx)("span",{className:"slash",children:t.date.start.year}),Object(p.jsx)("span",{className:"slash",children:t.date.start.month}),Object(p.jsx)("span",{children:t.date.start.day}),Object(p.jsx)("i",{className:"fas fa-caret-right fa-lg"}),Object(p.jsx)("span",{className:"slash",children:t.date.end.year}),Object(p.jsx)("span",{className:"slash",children:t.date.end.month}),Object(p.jsx)("span",{children:t.date.end.day})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"item",children:"\u6848\u4ef6\u985e\u5225"}),Object(p.jsx)("div",{children:t.constructionType})]}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("div",{className:"item",children:"\u5730\u9ede"}),Object(p.jsx)("div",{children:t.distriction+t.address})]})]}),Object(p.jsxs)("div",{className:"buttons",children:[0!==t.coordinate.lat&&0!==t.coordinate.lat&&Object(p.jsx)("div",{title:"\u986f\u793a\u4f4d\u7f6e",className:"buttons-locate",onClick:function(){!function(){var e=Math.random()/1e6;o({center:{lat:t.coordinate.lat+e,lng:t.coordinate.lng+e},polygon:t.coordinate.polygon,zoom:20+e,selectMarker:t,closeInfoWindow:!1})}()},children:Object(p.jsx)("i",{className:"fas fa-map-marker-alt"})}),Object(p.jsx)("div",{title:"\u66f4\u591a\u8cc7\u8a0a",className:r?"buttons-moreInfo":"buttons-moreInfoClicked",onClick:function(){s(!r)},children:Object(p.jsx)("i",{className:"fas ".concat(r?"fa-angle-double-down":"fa-angle-double-up")})})]})]}),Object(p.jsx)("div",{className:"".concat(r&&"noneDisplay"," horiLine")}),Object(p.jsx)("div",{className:"".concat(r&&"noneDisplay"," card-body"),children:Object(p.jsxs)("div",{className:"card-body-detailInfo",children:[Object(p.jsxs)("div",{className:"oneRow",children:[Object(p.jsx)("div",{className:"item",children:"\u5de5\u7a0b\u540d\u7a31"}),Object(p.jsx)("div",{className:"constructTitle",children:t.title})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"item",children:"\u7533\u8acb\u66f8\u7de8\u865f"}),Object(p.jsx)("div",{children:t.applicationNumber})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"item",children:"\u8a31\u53ef\u8b49\u7de8\u865f"}),Object(p.jsx)("div",{children:t.licenseNumber})]}),Object(p.jsxs)("div",{className:"oneRow",children:[Object(p.jsx)("div",{className:"item",children:"\u7533\u8acb\u55ae\u4f4d"}),Object(p.jsx)("div",{children:t.applicant})]}),Object(p.jsxs)("div",{className:"oneRow",children:[Object(p.jsx)("div",{className:"item",children:"\u5ee0\u5546"}),Object(p.jsx)("div",{children:t.contractor.name}),Object(p.jsx)("div",{className:"phone",children:t.contractor.phone})]}),Object(p.jsxs)("div",{className:"oneRow",children:[Object(p.jsx)("div",{className:"item",children:"\u8ca0\u8cac\u4eba"}),Object(p.jsx)("div",{children:t.personInCharge.name}),Object(p.jsx)("div",{className:"phone",children:t.personInCharge.phone})]})]})})]})},x=function(e){var t=e.handleCloseClick,n=e.handleMakerMessageClick;return Object(p.jsx)("div",{className:"closeButtonContainer",children:Object(p.jsx)("div",{className:"closeButton",onClick:function(){void 0!==t?t():void 0!==n&&n()},children:Object(p.jsx)("i",{className:"fas fa-times fa-lg"})})})},k=function(e){var t=e.margin,n=e.pageBtns,a=e.pageIndex,c=e.isMobile,r=e.handlePaginationClick,s=null,o=n.length-1,i=function(e){if(e===a)return"currentPage"};if(1===n.length)return null;if(c){var l=Array.from({length:n.length},(function(e,t){return t})),d=null;s=Object(p.jsxs)("div",{className:"pagination unselectable",children:[Object(p.jsx)("div",{className:" pageArrow",onClick:function(){r(d=a-1),d>0&&(document.getElementById("pageSelect").value=d)},children:Object(p.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(p.jsxs)("div",{className:"pageElement",children:[Object(p.jsx)("i",{className:"selectArrow fas fa-chevron-down fa-lg"}),Object(p.jsx)("span",{children:a+1}),Object(p.jsx)("select",{id:"pageSelect",value:a,onChange:function(e){return r(Number(e.target.value))},children:l.map((function(e){return Object(p.jsx)("option",{value:e,children:e+1},"pageSelect_"+(e+1))}))})]}),Object(p.jsx)("div",{className:" pageArrow",onClick:function(){r(d=a+1),d<o&&(document.getElementById("pageSelect").value=d)},children:Object(p.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(n.length>7){if(a-0>3&&o-a>3){var u=Array.from({length:3},(function(e,t){return t+a-1}));s=Object(p.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(p.jsx)("div",{className:"pageElement pageArrow",onClick:function(){r(a-1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(p.jsx)("div",{onClick:function(){r(0)},className:"pageElement pageBtn ".concat(i(0)),children:1},"page-01"),Object(p.jsx)("div",{className:"pageElement dot"}),u.map((function(e){return Object(p.jsx)("div",{onClick:function(){r(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page"+(e+1))})),Object(p.jsx)("div",{className:"pageElement dot"}),Object(p.jsx)("div",{onClick:function(){r(o)},className:"pageElement pageBtn ".concat(i(o)),children:o+1},"page-"+o+1),Object(p.jsx)("div",{className:"pageElement pageArrow",onClick:function(){r(a+1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(a-0<=3){var m=Array.from({length:5},(function(e,t){return t}));s=Object(p.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(p.jsx)("div",{className:"pageElement pageArrow",style:0===a?{visibility:"hidden"}:{},onClick:function(){r(a-1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),m.map((function(e){return Object(p.jsx)("div",{onClick:function(){r(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))})),Object(p.jsx)("div",{className:"pageElement dot"}),Object(p.jsx)("div",{onClick:function(){r(o)},className:"pageElement pageBtn ".concat(i(o)),children:o+1},"page-"+o+1),Object(p.jsx)("div",{className:"pageElement pageArrow",onClick:function(){r(a+1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(o-a<=3){var j=Array.from({length:5},(function(e,t){return t+o-4}));s=Object(p.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(p.jsx)("div",{className:"pageElement pageArrow",onClick:function(){r(a-1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(p.jsx)("div",{onClick:function(){r(0)},className:"pageElement pageBtn ".concat(i(0)),children:1},"page-01"),Object(p.jsx)("div",{className:"pageElement dot"}),j.map((function(e){return Object(p.jsx)("div",{onClick:function(){r(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))})),Object(p.jsx)("div",{className:"pageElement pageArrow",style:a===o?{visibility:"hidden"}:{},onClick:function(){r(a+1)},children:Object(p.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}}else s=Object(p.jsx)("div",{className:"pagination unselectable ".concat(t),children:n.map((function(e){return Object(p.jsx)("div",{onClick:function(){r(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))}))});return s},y=n(44),N=n.n(y),w=n(48),C=(n(57),function(e){var t=Object(a.useState)([null,null]),n=Object(m.a)(t,2),c=n[0],r=n[1],s=Object(m.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(""),u=Object(m.a)(d,2),j=u[0],g=u[1],f=Object(a.useState)({dist:null,workingState:null}),h=Object(m.a)(f,2),b=h[0],v=h[1],O=e.options,x=e.condition,k=e.mapParameters,C=e.setCondition,S=e.setPageIndex,M=e.setMapParameters,T=Object(a.useCallback)((function(){var e=document.getElementById("districtionSelect");P(e),P(e.previousElementSibling,e.value),Object(y.registerLocale)("zh-TW",w.a)}),[]);Object(a.useEffect)((function(){T(),v({dist:D("districtionSelect"),workingState:D("workingStateSelect")})}),[T]);var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.value;e.dataset.chosen=t},A=function(e){var t="number"===typeof e?e.toString():e;return 1===t.length&&(t="0"+t),t},I=function(){M({center:{lat:24.1512535,lng:120.6617366},polygon:null,zoom:12+Math.random()/1e4,selectMarker:k.selectMarker,closeInfoWindow:!0})},D=function(e){var t=document.getElementById(e),n=null;if(null===t)n="\u8f09\u5165\u4e2d";else{if(n=t.value,"workingStateSelect"===e)switch(n){case"0":n="\u5168\u6848\u4ef6";break;case"\u662f":n="\u65bd\u5de5\u4e2d";break;case"\u5426":n="\u672a\u65bd\u5de5"}"districtionSelect"===e&&"0"===n&&(n="\u5168\u5730\u5340")}return n},E=function(e){var t=null;switch(e){case 0:t="\u5168\u6848\u4ef6";break;case"\u662f":t="\u65bd\u5de5\u4e2d";break;case"\u5426":t="\u672a\u65bd\u5de5"}return t},B=Array.from({length:O.workingState.length},(function(e,t){return t})),_=Array.from({length:O.distriction.length},(function(e,t){return t}));return Object(p.jsxs)("div",{className:"selectors",children:[Object(p.jsxs)("div",{className:"selectContainer",children:[Object(p.jsx)("i",{className:"selectArrow fas fa-chevron-down"}),Object(p.jsxs)("select",{name:"workingState",id:"workingStateSelect",defaultValue:"\u662f",onChange:function(e){var t=x.distriction,n=0===Number(e.target.value)?0:e.target.value,a=null===x.date.start?null:Object(i.a)({},x.date.start),c=null===x.date.end?null:Object(i.a)({},x.date.end),r=j,s=x.stack;P(e.target),P(e.target.previousElementSibling,e.target.value),v((function(e){return Object(i.a)(Object(i.a)({},e),{},{workingState:E(n)})})),-1===s.indexOf("workingState")?s.push("workingState"):0===n&&(s=s.filter((function(e){return"workingState"!==e}))),I(),S(0),g(""!==r?"".concat(a.year,"/").concat(A(a.month),"/").concat(A(a.day)," - ").concat(c.year,"/").concat(A(c.month),"/").concat(A(c.day)):""),C({workingState:n,distriction:t,date:{start:null===a?null:Object(i.a)({},a),end:null===c?null:Object(i.a)({},c)},stack:s})},children:[Object(p.jsx)("option",{value:0,children:"\u5168\u6848\u4ef6"}),B.map((function(e){return Object(p.jsx)("option",{value:O.workingState[e],children:"\u662f"===O.workingState[e]?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"},O.workingState[e])}))]}),Object(p.jsx)("span",{children:b.workingState})]}),Object(p.jsxs)("div",{className:"selectContainer",children:[Object(p.jsx)("i",{className:"selectArrow fas fa-chevron-down"}),Object(p.jsxs)("select",{name:"distriction",id:"districtionSelect",defaultValue:"0",onChange:function(e){var t=0===Number(e.target.value)?0:e.target.value,n=x.workingState,a=null===x.date.start?null:Object(i.a)({},x.date.start),c=null===x.date.end?null:Object(i.a)({},x.date.end),r=j,s=x.stack;P(e.target),P(e.target.previousElementSibling,e.target.value),v((function(e){return Object(i.a)(Object(i.a)({},e),{},{dist:0===t?"\u5168\u5730\u5340":t})})),-1===s.indexOf("distriction")?s.push("distriction"):0===t&&(s=s.filter((function(e){return"distriction"!==e}))),I(),S(0),g(""!==r?"".concat(a.year,"/").concat(A(a.month),"/").concat(A(a.day)," - ").concat(c.year,"/").concat(A(c.month),"/").concat(A(c.day)):""),C({workingState:n,distriction:t,date:{start:null===a?null:Object(i.a)({},a),end:null===c?null:Object(i.a)({},c)},stack:s})},children:[Object(p.jsx)("option",{value:0,children:"\u5168\u5730\u5340"}),_.map((function(e){return Object(p.jsx)("option",{value:O.distriction[e],children:O.distriction[e]},O.distriction[e])}))]}),Object(p.jsx)("span",{children:b.dist})]}),Object(p.jsx)(N.a,{value:j,locale:"zh-TW",wrapperClassName:"dateSelectContainer",className:"dateSelect",placeholderText:"\u65e5\u671f\u7bc4\u570d",dateFormat:"yyyy/MM/dd",selectsRange:!0,startDate:o,endDate:l,minDate:new Date(Object.values(O.date.start)),maxDate:new Date(Object.values(O.date.end)),isClearable:!0,shouldCloseOnSelect:!1,onChange:function(e){if(r(e),null===e[0]||null!==e[1]){if(null===e[0]&&null===e[1]){var t=x.stack,n=x.distriction,a=x.workingState;return t=t.filter((function(e){return"date"!==e})),I(),g(""),void C({workingState:a,distriction:n,date:{start:null,end:null},stack:t})}var c=x.distriction,s=x.workingState,o={year:e[0].getFullYear(),month:e[0].getMonth()+1,day:e[0].getDate()},l={year:e[1].getFullYear(),month:e[1].getMonth()+1,day:e[1].getDate()},d=x.stack;-1===d.indexOf("date")&&d.push("date"),I(),S(0),g("".concat(o.year,"/").concat(A(o.month),"/").concat(A(o.day)," - ").concat(l.year,"/").concat(A(l.month),"/").concat(A(l.day))),C({workingState:s,distriction:c,date:{start:Object(i.a)({},o),end:Object(i.a)({},l)},stack:d})}else g("".concat(e[0].getFullYear(),"/").concat(A(e[0].getMonth()+1),"/").concat(A(e[0].getDate())," -"))},onFocus:function(e){return e.target.blur()}})]})}),S=function(e){var t=e.closeInfoBlock,n=e.handleCloseClick,c=e.isMobile,r=Object(a.useState)(0),s=Object(m.a)(r,2),o=s[0],i=s[1],l=Object(a.useMemo)((function(){var t=0;if(null!==e.value)return t=e.value.length>1?e.value[o].length:1===e.value.length?e.value[0].length:0,Array.from({length:t},(function(e,t){return t}))}),[e.value,o]),d=function(t){t>e.value.length-1||t<0||(document.getElementById("topAnchor").scrollIntoView(!1),i(t))},u=function(e){var t="";return null===e?t="hide":!0===e?t="close":!1===e&&(t="open"),t};if("loading"===e.value)return Object(p.jsx)("div",{className:"infoBlockContainer",children:Object(p.jsx)("div",{className:"infoBlock",style:{paddingTop:"0",backgroundColor:"#ececec"},children:Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)("i",{className:"fas fa-circle-notch fa-lg"})})})});if(null===e.value)return Object(p.jsx)("div",{className:"infoBlockContainer",children:Object(p.jsx)("div",{className:"infoBlock",children:Object(p.jsxs)("div",{className:"noContent",children:[Object(p.jsx)("div",{className:"exclamationMark",children:Object(p.jsx)("i",{className:"fas fa-exclamation-triangle fa-lg"})}),Object(p.jsx)("div",{children:"\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u5728\u8a66"})]})})});if(0===e.length)return Object(p.jsx)("div",{className:"infoBlockContainer ".concat(u(t)),children:Object(p.jsxs)("div",{className:"infoBlock",children:[Object(p.jsx)(x,{handleCloseClick:n}),Object(p.jsx)("div",{className:"toolbarContainer",children:Object(p.jsx)(C,{options:e.option,condition:e.condition,mapParameters:e.mapParameters,setCondition:e.setCondition,setMapParameters:e.setMapParameters,setPageIndex:i})}),Object(p.jsx)("div",{className:"cardsListContainer",children:Object(p.jsx)("div",{className:"cardsList",children:Object(p.jsx)("div",{className:"noContent",children:"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u8cc7\u6599"})})})]})});var j=Array.from({length:e.value.length},(function(e,t){return t}));return Object(p.jsx)("div",{className:"infoBlockContainer ".concat(u(t)),children:Object(p.jsxs)("div",{className:"infoBlock",children:[Object(p.jsx)(x,{handleCloseClick:n}),Object(p.jsx)("div",{className:"toolbarContainer",children:Object(p.jsx)(C,{options:e.option,condition:e.condition,setCondition:e.setCondition,setPageIndex:i,mapParameters:e.mapParameters,setMapParameters:e.setMapParameters})}),Object(p.jsx)("div",{className:"cardsListContainer",children:Object(p.jsxs)("div",{className:"cardsList",children:[Object(p.jsx)(k,{pageBtns:j,pageIndex:o,handlePaginationClick:d,isMobile:c}),Object(p.jsx)("div",{id:"topAnchor",style:{marginBottom:"2em"}}),l.map((function(t){return Object(p.jsx)(O,{value:e.value[o][t],setMapParameters:e.setMapParameters},"card"+(10*o+t+1))})),Object(p.jsx)(k,{pageBtns:j,pageIndex:o,handlePaginationClick:d,isMobile:c})]})})]})})},M=function(e){var t=e.closeInfoBlock,n=e.makerMessage,a=e.handleCloseClick,c=e.handleMakerMessageClick,r=e.userLocation,s=e.mapParameters,o=e.setMapParameters;return Object(p.jsxs)("div",{className:"infoButtonContainer ".concat(!1!==t&&!0!==n?"open":"close"),children:[Object(p.jsx)("div",{className:"button",onClick:a,children:Object(p.jsx)("i",{className:"fas fa-search fa-lg"})}),Object(p.jsx)("div",{className:"button",onClick:function(){var e=Math.random()/1e6;o({center:{lat:r.lat+e,lng:r.lng+e},polygon:s.polygon,zoom:s.zoom,selectMarker:s.selectMarker,closeInfoWindow:!1})},style:{display:null===r?"none":""},children:Object(p.jsx)("i",{className:"fas fa-map-marker-alt fa-lg"})}),Object(p.jsx)("div",{className:"button",onClick:function(){c()},children:Object(p.jsx)("i",{className:"fas fa-info fa-lg"})})]})},T=function(e){var t=e.makerMessage,n=e.handleMakerMessageClick;return Object(p.jsx)("div",{className:"infoBlockContainer ".concat(function(e){var t="";return null===e?t="hide":!0===e?t="open":!1===e&&(t="close"),t}(t)),children:Object(p.jsxs)("div",{className:"infoBlock maker",children:[Object(p.jsx)(x,{handleMakerMessageClick:n}),Object(p.jsx)("div",{className:"makerMessage flex",children:Object(p.jsx)("div",{})})]})})};function P(){return(P=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET"});case 2:if(200===(n=e.sent).status&&n.ok){e.next=5;break}throw new Error("[fetchAPIData] Error fetching data: ".concat(n.status," ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){return P.apply(this,arguments)},I=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,c,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,c=1e3,r=!0;case 4:if(!r){e.next=19;break}return s="".concat(t,"?$format=json&limit=").concat(c,"&offset=").concat(a),e.prev=6,e.next=9,A(s);case 9:(o=e.sent)&&o.length>0?(n=n.concat(o),o.length<c?r=!1:a+=c):r=!1,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("Error fetching Taichung data at offset ".concat(a,":"),e.t0),r=!1;case 17:e.next=4;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,c,r,s,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:2,console.log("\ud83d\udce1 SimpleFetch \u958b\u59cb\u6293\u53d6:",t),a=Array.isArray(t)?t:[t],c=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,r,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:1,e.prev=1,console.log("\ud83d\udce5 \u5617\u8a66\u7b2c ".concat(a," \u6b21\u6293\u53d6: ").concat(t)),e.next=5,fetch(t,{method:"GET",mode:"cors",headers:{Accept:"application/json"}});case 5:if(r=e.sent,console.log("\ud83d\udce5 \u6536\u5230\u56de\u61c9 ".concat(t,":"),r.status,r.statusText),r.ok){e.next=9;break}throw new Error("HTTP error! status: ".concat(r.status));case 9:return e.abrupt("return",r.json());case 12:if(e.prev=12,e.t0=e.catch(1),console.log("\u274c \u7b2c ".concat(a," \u6b21\u5617\u8a66\u5931\u6557:"),e.t0.message),!(a<=n)){e.next=20;break}return console.log("\ud83d\udd04 \u7b49\u5f85 2 \u79d2\u5f8c\u91cd\u8a66..."),e.next=19,new Promise((function(e){return setTimeout(e,2e3)}));case 19:return e.abrupt("return",c(t,a+1));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),r=a.map((function(e){return c(e)})),e.prev=5,e.next=8,Promise.all(r);case 8:return s=e.sent,console.log("\u2705 SimpleFetch \u6210\u529f:",s),e.abrupt("return",s.flat());case 13:return e.prev=13,e.t0=e.catch(5),console.error("\u274c SimpleFetch \u6700\u7d42\u5931\u6557:",e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,c,r,s,o,i,l,u,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02\u5c08\u7528 Fetcher \u958b\u59cb:",t),e.prev=1,e.next=4,fetch(t,{method:"GET",mode:"cors"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(n.status));case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("\u2705 \u53f0\u5317\u5e02\u8cc7\u6599\u8f09\u5165\u6210\u529f"),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(1),console.log("\u274c \u53f0\u5317\u5e02\u76f4\u63a5\u6293\u53d6\u5931\u6557\uff0c\u5617\u8a66\u5099\u7528\u65b9\u6848:",e.t0.message),c=0,r=["https://api.allorigins.win/get?url=","https://corsproxy.io/?","https://cors-anywhere.herokuapp.com/"];case 19:if(!(c<r.length)){e.next=59;break}if(s=r[c],e.prev=21,console.log("\ud83d\udd04 \u5617\u8a66\u4ee3\u7406: ".concat(s)),o=void 0,i=void 0,!s.includes("allorigins")){e.next=40;break}return o=s+encodeURIComponent(t),e.next=29,fetch(o);case 29:if(!(i=e.sent).ok){e.next=38;break}return e.next=33,i.json();case 33:if(!(l=e.sent).contents){e.next=38;break}return u=JSON.parse(l.contents),console.log("\u2705 \u53f0\u5317\u5e02\u5099\u7528\u65b9\u6848\u6210\u529f (allorigins)"),e.abrupt("return",u);case 38:e.next=50;break;case 40:return o=s+encodeURIComponent(t),e.next=43,fetch(o);case 43:if(!(i=e.sent).ok){e.next=50;break}return e.next=47,i.json();case 47:return m=e.sent,console.log("\u2705 \u53f0\u5317\u5e02\u5099\u7528\u65b9\u6848\u6210\u529f"),e.abrupt("return",m);case 50:e.next=56;break;case 52:return e.prev=52,e.t1=e.catch(21),console.log("\u274c \u4ee3\u7406\u5931\u6557: ".concat(s),e.t1.message),e.abrupt("continue",56);case 56:c++,e.next=19;break;case 59:return console.log("\u274c \u6240\u6709\u53f0\u5317\u5e02\u6293\u53d6\u65b9\u6848\u90fd\u5931\u6557"),e.abrupt("return",[]);case 61:case"end":return e.stop()}}),e,null,[[1,14],[21,52]])})));return function(t){return e.apply(this,arguments)}}(),B=Object.freeze({applicationId:"\u7533\u8acb\u66f8\u7de8\u865f",permitId:"\u8a31\u53ef\u8b49\u7de8\u865f",startDate:"\u6838\u51c6\u8d77\u65e5\u671f",endDate:"\u6838\u51c6\u8fc4\u65e5\u671f",applicantUnit:"\u7533\u8acb\u55ae\u4f4d",projectName:"\u5de5\u7a0b\u540d\u7a31",caseType:"\u6848\u4ef6\u985e\u5225",pipeType:"\u7ba1\u7dda\u5de5\u7a0b\u985e\u5225",district:"\u5340\u57df\u540d\u7a31",location:"\u5730\u9ede",isStarted:"\u662f\u5426\u958b\u5de5",contactName:"\u627f\u8fa6\u4eba",contactPhone:"\u627f\u8fa6\u4eba\u96fb\u8a71",contractorName:"\u5ee0\u5546\u540d\u7a31",contractorPhone:"\u5ee0\u5546\u96fb\u8a71",lng:"\u7d93\u5ea6",lat:"\u7def\u5ea6",geometry:"\u65bd\u5de5\u7bc4\u570d\u5750\u6a19"}),_=Object.freeze({projectName:"Addr",startDate:"Cb_Da",endDate:"Ce_Da",district:"C_Name",location:"Addr",contractorName:"App_Name",x:"X",y:"Y"}),z=Object.freeze({projectName:"cnstRoad",dateRange:"cnstDate",contractorName:"contractor",contractorPhone:"contractorPhone",permitId:"pmtNo",lat:"lat",lng:"lng"}),W=n(36);W.a.defs("TWD97","+proj=tmerc +lat_0=0 +lon_0=121 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),W.a.defs("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");var L={taichung:{name:"\u53f0\u4e2d\u5e02",apiUrl:"https://datacenter.taichung.gov.tw/swagger/OpenData/d5adb71a-00bb-4573-b67e-ffdccfc7cd27",keyMap:B,fetcher:I,parser:function(e){var t,n,a=function(e){return{year:Number(e.substring(0,3))+1911,month:Number(e.substring(3,5)),day:Number(e.substring(5))}},c=(t=e[B.lat],n=e[B.lng],{lat:Number(t),lng:Number(n)});return{city:"\u53f0\u4e2d\u5e02",title:e[B.projectName],distriction:e[B.district],address:e[B.location],pipeType:e[B.pipeType],constructionType:e[B.caseType],workingState:e[B.isStarted],date:{start:a(e[B.startDate]),end:a(e[B.endDate])},applicationNumber:e[B.applicationId],licenseNumber:e[B.permitId],applicant:e[B.applicantUnit],contractor:{name:e[B.contractorName],phone:e[B.contractorPhone]},personInCharge:{name:e[B.contactName]?e[B.contactName].substring(0,1)+"\u25ef\u25ef":"N/A",phone:e[B.contactPhone]},coordinate:Object(i.a)(Object(i.a)({},c),{},{polygon:function(e){if(!e||!/^POLYGON\(\(.*\)\)$/.test(e.replace(/\s/g,"")))return null;return e.replace(/\s/g,"").split("POLYGON((")[1].split("))")[0].split(",").map((function(e){var t=e.split("24."),n=Object(m.a)(t,2),a=n[0],c=n[1];return{lat:Number("24."+c),lng:Number(a)}}))}(e[B.geometry])})}},isDisabled:!0},taipei:{name:"\u53f0\u5317\u5e02",apiUrl:"https://tpnco.blob.core.windows.net/blobfs/Todaywork.json",keyMap:_,fetcher:E,parser:function(e){console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02\u89e3\u6790\u55ae\u500b\u9805\u76ee:",e);var t=e.properties,n=e.geometry;console.log("\ud83d\udccb Properties:",t),console.log("\ud83d\udccd Geometry:",n);var a=function(e){return console.log("\ud83d\udcc5 \u89e3\u6790\u65e5\u671f:",e),e&&9===e.length?{year:parseInt(e.substring(0,3),10)+1911,month:parseInt(e.substring(4,6),10),day:parseInt(e.substring(7,9),10)}:{year:2025,month:7,day:2}},c=a(t[_.startDate]),r=a(t[_.endDate]),s=parseFloat(n.coordinates[0]),o=parseFloat(n.coordinates[1]);console.log("\ud83d\uddfa\ufe0f \u539f\u59cb\u5750\u6a19 (TWD97):",{x:s,y:o});var i=function(e,t){if("number"!==typeof e||"number"!==typeof t)return console.error("Invalid coordinates for conversion"),{lat:0,lng:0};var n=Object(W.a)("TWD97","WGS84",[e,t]),a=Object(m.a)(n,2),c=a[0];return{lat:a[1],lng:c}}(s,o),l=i.lat,d=i.lng;console.log("\ud83c\udf0d \u8f49\u63db\u5f8c\u5750\u6a19 (WGS84):",{lat:l,lng:d});var u={city:"\u53f0\u5317\u5e02",title:t[_.location]||"\u672a\u77e5\u5de5\u7a0b",distriction:t[_.district]||"\u672a\u77e5\u5340\u57df",address:t[_.location]||"\u672a\u77e5\u5730\u5740",pipeType:"\u9053\u8def\u65bd\u5de5",constructionType:"\u9053\u8def\u5de5\u7a0b",workingState:"\u662f",date:{start:c,end:r},applicationNumber:"N/A",licenseNumber:"N/A",applicant:t[_.contractorName]||"N/A",contractor:{name:t[_.contractorName]||"N/A",phone:"N/A"},personInCharge:{name:"N/A",phone:"N/A"},coordinate:{lat:l,lng:d,polygon:null}};return console.log("\u2728 \u53f0\u5317\u5e02\u89e3\u6790\u7d50\u679c:",u),u}},kaohsiung:{name:"\u9ad8\u96c4\u5e02",apiUrl:"https://corsproxy.io/?https://data.kcg.gov.tw/Json/Get/d636aa85-4b08-42ab-a742-4f2aad070450",keyMap:z,fetcher:D,parser:function(e){return console.log("\ud83c\udfed \u9ad8\u96c4\u5e02\u89e3\u6790\u539f\u59cb\u8cc7\u6599:",e),e&&e.Data&&Array.isArray(e.Data)?(console.log("\ud83d\udcca \u9ad8\u96c4\u5e02 Data \u9663\u5217\u9577\u5ea6:",e.Data.length),e.Data.map((function(e,t){console.log("\ud83d\udd04 \u8655\u7406\u9ad8\u96c4\u5e02\u7b2c ".concat(t+1," \u7b46\u8cc7\u6599:"),e);var n=function(e){if(console.log("\ud83d\udcc5 \u9ad8\u96c4\u5e02\u89e3\u6790\u65e5\u671f:",e),!e)return{year:2025,month:7,day:2};var t=new Date(e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}(e[z.dateRange]),a={city:"\u9ad8\u96c4\u5e02",title:e[z.projectName]||"\u672a\u77e5\u5de5\u7a0b",distriction:"N/A",address:e[z.projectName]||"\u672a\u77e5\u5730\u5740",pipeType:"\u9053\u8def\u65bd\u5de5",constructionType:"\u9053\u8def\u5de5\u7a0b",workingState:"\u662f",date:{start:n,end:n},applicationNumber:"N/A",licenseNumber:e[z.permitId]||"N/A",applicant:e[z.contractorName]||"N/A",contractor:{name:e[z.contractorName]||"N/A",phone:e[z.contractorPhone]||"N/A"},personInCharge:{name:"N/A",phone:"N/A"},coordinate:{lat:Number(e[z.lat])||0,lng:Number(e[z.lng])||0,polygon:null}};return console.log("\u2728 \u9ad8\u96c4\u5e02\u7b2c ".concat(t+1," \u7b46\u89e3\u6790\u7d50\u679c:"),a),a}))):(console.log("\u274c \u9ad8\u96c4\u5e02\u8cc7\u6599\u683c\u5f0f\u932f\u8aa4"),[])}}},F=function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(m.a)(r,2),l=s[0],j=s[1],g=Object(a.useState)(null),f=Object(m.a)(g,2),h=f[0],b=f[1],O=Object(a.useState)(null),x=Object(m.a)(O,2),k=x[0],y=x[1],N=Object(a.useState)("loading"),w=Object(m.a)(N,2),C=w[0],P=w[1],A=Object(a.useState)({workingState:"\u662f",distriction:0,date:{start:null,end:null},stack:["workingState"]}),I=Object(m.a)(A,2),D=I[0],E=I[1],B=Object(a.useState)({center:{lat:25.033,lng:121.5654},polygon:null,zoom:12,selectMarker:null,closeInfoWindow:null}),_=Object(m.a)(B,2),z=_[0],W=_[1],F=Object(a.useCallback)((function(){var e;U(),e=Y(428),window.addEventListener("resize",U),window.addEventListener("resize",(function(){return Y(428)})),G(),R(e)}),[]),G=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){!function(e){var t={center:{lat:e.coords.latitude,lng:e.coords.longitude},polygon:null,zoom:12,selectMarker:null,closeInfoWindow:null};W(t),j(t.center)}(e)})):console.log("geolocation is not available")},R=function(e){!1===e&&b(!1)},U=function(){document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px"))},Y=function(e){var t=null;return t=window.innerWidth<=e,c(t),t},J=function(e){var t=Object.values(e),n=Object(m.a)(t,3),a=n[0],c=n[1],r=n[2];return a=a.toString(),c=c.toString(),r=r.toString(),1===c.length&&(c="0"+c),1===r.length&&(r="0"+r),parseInt(a+c+r,10)},H=function(e){for(var t=e,n=[],a=0;a<t.length;a+=10)n.push(t.slice(a,a+10));return n},V=Object(a.useCallback)(Object(u.a)(d.a.mark((function e(){var t,n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 \u958b\u59cb\u6293\u53d6\u8cc7\u6599..."),P("loading"),t=Object.values(L).filter((function(e){return!e.isDisabled})),console.log("\ud83d\udccd \u555f\u7528\u7684\u57ce\u5e02:",t.map((function(e){return e.name}))),n=t.map(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83d\udce1 \u6b63\u5728\u6293\u53d6 ".concat(t.name," \u7684\u8cc7\u6599..."),t.apiUrl),e.next=4,t.fetcher(t.apiUrl);case 4:return n=e.sent,console.log("\u2705 ".concat(t.name," \u539f\u59cb\u8cc7\u6599:"),n),"\u53f0\u5317\u5e02"===t.name?(console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02 features \u6578\u91cf:",(null===n||void 0===n||null===(c=n.features)||void 0===c?void 0:c.length)||0),n&&n.features&&Array.isArray(n.features)?a=n.features.map(t.parser):(console.log("\u26a0\ufe0f \u53f0\u5317\u5e02\u8cc7\u6599\u683c\u5f0f\u7570\u5e38\uff0c\u8df3\u904e\u89e3\u6790"),a=[])):"\u9ad8\u96c4\u5e02"===t.name?(console.log("\ud83c\udfed \u9ad8\u96c4\u5e02 Data \u6578\u91cf:",(null===n||void 0===n||null===(r=n.Data)||void 0===r?void 0:r.length)||0),a=t.parser(n)):(console.log("\ud83c\udfd8\ufe0f ".concat(t.name," \u8cc7\u6599\u9577\u5ea6:"),(null===n||void 0===n?void 0:n.length)||0),a=Array.isArray(n)?n.map(t.parser):[]),console.log("\u2728 ".concat(t.name," \u89e3\u6790\u5f8c\u8cc7\u6599:"),a),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),console.error("\u274c ".concat(t.name," \u6293\u53d6\u5931\u6557:"),e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.allSettled(n);case 7:a=e.sent,console.log("\ud83c\udfaf Promise.allSettled \u7d50\u679c:",a),c=a.filter((function(e){return"fulfilled"===e.status})).flatMap((function(e){return e.value})),console.log("\ud83d\udcca \u5408\u4f75\u5f8c\u7684\u6240\u6709\u8cc7\u6599:",c),console.log("\ud83d\udcc8 \u7e3d\u8cc7\u6599\u7b46\u6578:",c.length),0===c.length?(console.log("\u26a0\ufe0f \u6c92\u6709\u8cc7\u6599\uff0c\u8a2d\u5b9a\u70ba null"),P(null)):(console.log("\ud83c\udf89 \u8a2d\u5b9a\u8cc7\u6599\u5b8c\u6210"),P(c));case 13:case"end":return e.stop()}}),e)}))),[]);Object(a.useEffect)((function(){F(),V()}),[F,V]);var Z=Object(a.useMemo)((function(){return function(e){var t=C,n=[];if(null===t||"loading"===t)n=t;else if(3===e.stack.length)n=t.filter((function(t){return(J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end))&&t.workingState===e.workingState&&t.distriction===e.distriction}));else if(2===e.stack.length)if(-1!==e.stack.indexOf("date")){var a=e.stack[1-e.stack.indexOf("date")];n=t.filter((function(t){return(J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end))&&t[a]===e[a]}))}else n=t.filter((function(t){return t.workingState===e.workingState&&t.distriction===e.distriction}));else 1===e.stack.length&&(0!==e.distriction?n=t.filter((function(t){return t.distriction===e.distriction})):null!==e.date.start&&null!==e.date.end?n=t.filter((function(t){return J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end)})):0!==e.workingState&&(n=t.filter((function(t){return t.workingState===e.workingState}))));return n}(D)}),[D,C]),K=Object(a.useMemo)((function(){var e={workingState:[],distriction:[],date:{start:{},end:{}}};if(D.stack.length>=0&&"loading"!==C&&null!==C){e.date.start=Object(i.a)({},C[0].date.start),e.date.end=Object(i.a)({},C[0].date.end);var t,n=Object(o.a)(C);try{for(n.s();!(t=n.n()).done;){var a=t.value;-1===e.workingState.indexOf(a.workingState)&&e.workingState.push(a.workingState),-1===e.distriction.indexOf(a.distriction)&&e.distriction.push(a.distriction),J(a.date.start)<=J(e.date.start)&&(e.date.start=Object(i.a)({},a.date.start)),J(a.date.end)>=J(e.date.end)&&(e.date.end=Object(i.a)({},a.date.end))}}catch(c){n.e(c)}finally{n.f()}}return e}),[D.stack,C]),$=function(){var e=h;b(e=null!==e&&!e)},X=function(){var e=k;y(e=null===k||!e)};if("loading"===C||null===C)return Object(p.jsxs)("div",{children:[Object(p.jsx)(v,{constructionsData:null,mapParameters:z,setMapParameters:W}),Object(p.jsx)(S,{value:C})]});var q=null;return q=0===D.distriction&&null===D.date.start&&null===D.date.end&&0===D.workingState?C:Z,Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(v,{constructionsData:H(q),mapParameters:z,closeInfoBlock:h,setMapParameters:W,makerMessage:k,isMobile:n,userLocation:l}),Object(p.jsx)(M,{closeInfoBlock:h,makerMessage:k,handleCloseClick:$,handleMakerMessageClick:X,userLocation:l,mapParameters:z,setMapParameters:W}),Object(p.jsx)(S,{value:H(q),length:q.length,option:K,condition:D,mapParameters:z,closeInfoBlock:h,isMobile:n,handleCloseClick:$,setCondition:E,setMapParameters:W}),Object(p.jsx)(T,{makerMessage:k,handleMakerMessageClick:X})]})};n(105);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(F,{})}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.9a22cbcc.chunk.js.map