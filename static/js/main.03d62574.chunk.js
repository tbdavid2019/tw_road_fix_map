(this["webpackJsonptw-road-fix-map"]=this["webpackJsonptw-road-fix-map"]||[]).push([[0],{105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(16),o=n.n(c),s=n(45),i=n(7),l=n(6),d=n.n(l),u=n(9),m=n(5),p=n(20),g=n(0),j=function(e){var t=e.value;return Object(g.jsxs)("div",{className:"cardMini",children:[Object(g.jsxs)("div",{className:"title",children:[Object(g.jsx)("div",{className:"state inlineBlock ".concat("\u662f"===t.workingState?"working":"notWorking"),children:"\u662f"===t.workingState?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"}),Object(g.jsx)("div",{className:"pipeType inlineBlock",children:t.pipeType})]}),Object(g.jsx)("div",{className:"title",children:Object(g.jsxs)("div",{className:"date",children:[Object(g.jsx)("span",{className:"slash",children:t.date.start.year}),Object(g.jsx)("span",{className:"slash",children:t.date.start.month}),Object(g.jsx)("span",{children:t.date.start.day}),Object(g.jsx)("i",{className:"fas fa-caret-right fa-lg"}),Object(g.jsx)("span",{className:"slash",children:t.date.end.year}),Object(g.jsx)("span",{className:"slash",children:t.date.end.month}),Object(g.jsx)("span",{children:t.date.end.day})]})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"item",children:"\u6848\u4ef6\u985e\u5225"}),Object(g.jsx)("div",{className:"data",children:t.constructionType})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"item",children:"\u5de5\u7a0b\u540d\u7a31"}),Object(g.jsx)("div",{className:"data",children:t.title})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"item",children:"\u5730\u9ede"}),Object(g.jsx)("div",{className:"data last",children:t.distriction+t.address})]})]})},h=[{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#f0f0f0"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"},{color:"#ec7868"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#3da7a7"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#cccccc"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#f9f9f9"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#83cfe2"}]}],b={fillColor:"#FF7777",fillOpacity:.1,strokeColor:"#FF7777",strokeOpacity:1,strokeWeight:1,clickable:!1,draggable:!1,editable:!1,geodesic:!1,zIndex:0},f={styles:[{textSize:14,height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m1.png"},{textSize:14,height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m2.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m3.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m4.png"},{height:66,width:66,url:"/tw_road_fix_map/img/markerclusterer/m5.png"}]},v=function(e){var t=Object(a.useState)(60),n=Object(m.a)(t,2),r=n[0],c=n[1],o=e.constructionsData,s=e.mapParameters,i=e.closeInfoBlock,l=e.setMapParameters,d=e.isMobile,u=e.makerMessage,v=e.userLocation,O=Object(a.useRef)(null),x=null!==o&&0!==o.length,N=Object(a.useMemo)((function(){var e=function(e){var t=10*(o.length-1)+o[o.length-1].length;return Array.from({length:t},(function(e,t){return t})).map((function(t){return 0!==o[Math.floor(t/10)][t%10].coordinate.lat&&0!==o[Math.floor(t/10)][t%10].coordinate.lng&&Object(g.jsx)(p.d,{position:{lat:Number(o[Math.floor(t/10)][t%10].coordinate.lat),lng:Number(o[Math.floor(t/10)][t%10].coordinate.lng)},onClick:function(){return function(e){var t=o[Math.floor(e/10)][e%10],n=O.current.getCenter().toJSON();l({center:n,polygon:t.coordinate.polygon,zoom:s.zoom,selectMarker:t,closeInfoWindow:!1})}(t)},clusterer:e,noClustererRedraw:!0,icon:"\u662f"===o[Math.floor(t/10)][t%10].workingState?{url:"/tw_road_fix_map/img/marker/cone.png",scaledSize:{width:37,height:37}}:{url:"/tw_road_fix_map/img/marker/cone_gray.png",scaledSize:{width:37,height:37}}},"marker_"+t)}))};return x&&Object(g.jsx)(p.e,{averageCenter:!0,options:f,gridSize:r,children:function(t){return e(t)}},"markerClusterer")}),[o,x,r,s,l]);return Object(g.jsxs)("div",{className:"mapContainer",children:[Object(g.jsx)("div",{id:"mapCover",className:"mapCover ".concat(d?null===i&&null===u?"close":!1===i||!0===u?"open":!0===i||!1===u?"close":void 0:"close")}),Object(g.jsx)(p.c,{googleMapsApiKey:"AIzaSyB9zIkabAHoudMDAwbKom6URgjmUuejEpo",children:Object(g.jsxs)(p.a,{mapContainerStyle:{width:"100%",height:"inherit"},zoom:s.zoom,center:s.center,options:{styles:h,minZoom:11,maxZoom:20,disableDefaultUI:!0},onLoad:function(e){!function(e){O.current=e}(e)},onZoomChanged:function(){var e=null;!O.current||O.current.zoom<=18?e=60:O.current.zoom>18&&(e=1),c(e)},children:[N,null!==v&&Object(g.jsx)(p.d,{position:v,zIndex:100},"userLocation"),function(){var e=!1;return!0===s.closeInfoWindow?e=!1:null!==s.selectMarker&&(e=!0),e}()&&Object(g.jsx)(p.b,{position:{lat:s.selectMarker.coordinate.lat,lng:s.selectMarker.coordinate.lng},options:{pixelOffset:new window.google.maps.Size(0,-45)},onCloseClick:function(){l({center:s.center,polygon:s.polygon,zoom:s.zoom,selectMarker:null,closeInfoWindow:!0})},children:Object(g.jsx)(j,{value:s.selectMarker})}),s.polygon&&Object(g.jsx)(p.f,{path:s.polygon,options:b})]})})]})},O=function(e){var t=e.value,n=Object(a.useState)(!0),r=Object(m.a)(n,2),c=r[0],o=r[1],s=e.setMapParameters;return"loading"===t?Object(g.jsx)("div",{className:"card loading",children:Object(g.jsx)("div",{children:"Loading..."})}):Object(g.jsxs)("div",{className:"card",children:[Object(g.jsxs)("div",{className:"card-meta",children:[Object(g.jsxs)("div",{className:"card-meta-title",children:[Object(g.jsx)("div",{className:"highlighter bgColor_mintGreen-light",style:{width:t.pipeType.length+"em"}}),Object(g.jsx)("div",{className:"state unselectable ".concat("\u662f"===t.workingState?"working":"notWorking"),children:"\u662f"===t.workingState?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"}),Object(g.jsx)("div",{className:"pipeType",style:{position:"relative"},children:t.pipeType})]}),Object(g.jsxs)("div",{className:"card-meta-basicInfo",children:[Object(g.jsxs)("div",{className:"date",children:[Object(g.jsx)("span",{className:"slash",children:t.date.start.year}),Object(g.jsx)("span",{className:"slash",children:t.date.start.month}),Object(g.jsx)("span",{children:t.date.start.day}),Object(g.jsx)("i",{className:"fas fa-caret-right fa-lg"}),Object(g.jsx)("span",{className:"slash",children:t.date.end.year}),Object(g.jsx)("span",{className:"slash",children:t.date.end.month}),Object(g.jsx)("span",{children:t.date.end.day})]}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("div",{className:"item",children:"\u6848\u4ef6\u985e\u5225"}),Object(g.jsx)("div",{children:t.constructionType})]}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("div",{className:"item",children:"\u5730\u9ede"}),Object(g.jsx)("div",{children:t.distriction+t.address})]})]}),Object(g.jsxs)("div",{className:"buttons",children:[0!==t.coordinate.lat&&0!==t.coordinate.lat&&Object(g.jsx)("div",{title:"\u986f\u793a\u4f4d\u7f6e",className:"buttons-locate",onClick:function(){!function(){var e=Math.random()/1e6;s({center:{lat:t.coordinate.lat+e,lng:t.coordinate.lng+e},polygon:t.coordinate.polygon,zoom:20+e,selectMarker:t,closeInfoWindow:!1})}()},children:Object(g.jsx)("i",{className:"fas fa-map-marker-alt"})}),Object(g.jsx)("div",{title:"\u66f4\u591a\u8cc7\u8a0a",className:c?"buttons-moreInfo":"buttons-moreInfoClicked",onClick:function(){o(!c)},children:Object(g.jsx)("i",{className:"fas ".concat(c?"fa-angle-double-down":"fa-angle-double-up")})})]})]}),Object(g.jsx)("div",{className:"".concat(c&&"noneDisplay"," horiLine")}),Object(g.jsx)("div",{className:"".concat(c&&"noneDisplay"," card-body"),children:Object(g.jsxs)("div",{className:"card-body-detailInfo",children:[Object(g.jsxs)("div",{className:"oneRow",children:[Object(g.jsx)("div",{className:"item",children:"\u5de5\u7a0b\u540d\u7a31"}),Object(g.jsx)("div",{className:"constructTitle",children:t.title})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"item",children:"\u7533\u8acb\u66f8\u7de8\u865f"}),Object(g.jsx)("div",{children:t.applicationNumber})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"item",children:"\u8a31\u53ef\u8b49\u7de8\u865f"}),Object(g.jsx)("div",{children:t.licenseNumber})]}),Object(g.jsxs)("div",{className:"oneRow",children:[Object(g.jsx)("div",{className:"item",children:"\u7533\u8acb\u55ae\u4f4d"}),Object(g.jsx)("div",{children:t.applicant})]}),Object(g.jsxs)("div",{className:"oneRow",children:[Object(g.jsx)("div",{className:"item",children:"\u5ee0\u5546"}),Object(g.jsx)("div",{children:t.contractor.name}),Object(g.jsx)("div",{className:"phone",children:t.contractor.phone})]}),Object(g.jsxs)("div",{className:"oneRow",children:[Object(g.jsx)("div",{className:"item",children:"\u8ca0\u8cac\u4eba"}),Object(g.jsx)("div",{children:t.personInCharge.name}),Object(g.jsx)("div",{className:"phone",children:t.personInCharge.phone})]})]})})]})},x=function(e){var t=e.handleCloseClick,n=e.handleMakerMessageClick;return Object(g.jsx)("div",{className:"closeButtonContainer",children:Object(g.jsx)("div",{className:"closeButton",onClick:function(){void 0!==t?t():void 0!==n&&n()},children:Object(g.jsx)("i",{className:"fas fa-times fa-lg"})})})},N=function(e){var t=e.margin,n=e.pageBtns,a=e.pageIndex,r=e.isMobile,c=e.handlePaginationClick,o=null,s=n.length-1,i=function(e){if(e===a)return"currentPage"};if(1===n.length)return null;if(r){var l=Array.from({length:n.length},(function(e,t){return t})),d=null;o=Object(g.jsxs)("div",{className:"pagination unselectable",children:[Object(g.jsx)("div",{className:" pageArrow",onClick:function(){c(d=a-1),d>0&&(document.getElementById("pageSelect").value=d)},children:Object(g.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(g.jsxs)("div",{className:"pageElement",children:[Object(g.jsx)("i",{className:"selectArrow fas fa-chevron-down fa-lg"}),Object(g.jsx)("span",{children:a+1}),Object(g.jsx)("select",{id:"pageSelect",value:a,onChange:function(e){return c(Number(e.target.value))},children:l.map((function(e){return Object(g.jsx)("option",{value:e,children:e+1},"pageSelect_"+(e+1))}))})]}),Object(g.jsx)("div",{className:" pageArrow",onClick:function(){c(d=a+1),d<s&&(document.getElementById("pageSelect").value=d)},children:Object(g.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(n.length>7){if(a-0>3&&s-a>3){var u=Array.from({length:3},(function(e,t){return t+a-1}));o=Object(g.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(g.jsx)("div",{className:"pageElement pageArrow",onClick:function(){c(a-1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(g.jsx)("div",{onClick:function(){c(0)},className:"pageElement pageBtn ".concat(i(0)),children:1},"page-01"),Object(g.jsx)("div",{className:"pageElement dot"}),u.map((function(e){return Object(g.jsx)("div",{onClick:function(){c(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page"+(e+1))})),Object(g.jsx)("div",{className:"pageElement dot"}),Object(g.jsx)("div",{onClick:function(){c(s)},className:"pageElement pageBtn ".concat(i(s)),children:s+1},"page-"+s+1),Object(g.jsx)("div",{className:"pageElement pageArrow",onClick:function(){c(a+1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(a-0<=3){var m=Array.from({length:5},(function(e,t){return t}));o=Object(g.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(g.jsx)("div",{className:"pageElement pageArrow",style:0===a?{visibility:"hidden"}:{},onClick:function(){c(a-1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),m.map((function(e){return Object(g.jsx)("div",{onClick:function(){c(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))})),Object(g.jsx)("div",{className:"pageElement dot"}),Object(g.jsx)("div",{onClick:function(){c(s)},className:"pageElement pageBtn ".concat(i(s)),children:s+1},"page-"+s+1),Object(g.jsx)("div",{className:"pageElement pageArrow",onClick:function(){c(a+1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}else if(s-a<=3){var p=Array.from({length:5},(function(e,t){return t+s-4}));o=Object(g.jsxs)("div",{className:"pagination unselectable ".concat(t),children:[Object(g.jsx)("div",{className:"pageElement pageArrow",onClick:function(){c(a-1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-left"})},"prePage"),Object(g.jsx)("div",{onClick:function(){c(0)},className:"pageElement pageBtn ".concat(i(0)),children:1},"page-01"),Object(g.jsx)("div",{className:"pageElement dot"}),p.map((function(e){return Object(g.jsx)("div",{onClick:function(){c(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))})),Object(g.jsx)("div",{className:"pageElement pageArrow",style:a===s?{visibility:"hidden"}:{},onClick:function(){c(a+1)},children:Object(g.jsx)("i",{className:"fas fa-chevron-right"})},"nextPage")]})}}else o=Object(g.jsx)("div",{className:"pagination unselectable ".concat(t),children:n.map((function(e){return Object(g.jsx)("div",{onClick:function(){c(e)},className:"pageElement pageBtn ".concat(i(e)),children:e+1},"page-"+(e+1))}))});return o},k=n(44),y=n.n(k),w=n(48),C=(n(57),function(e){var t=Object(a.useState)([null,null]),n=Object(m.a)(t,2),r=n[0],c=n[1],o=Object(m.a)(r,2),s=o[0],l=o[1],d=Object(a.useState)(""),u=Object(m.a)(d,2),p=u[0],j=u[1],h=Object(a.useState)({dist:null,workingState:null}),b=Object(m.a)(h,2),f=b[0],v=b[1],O=e.options,x=e.condition,N=e.mapParameters,C=e.setCondition,S=e.setPageIndex,M=e.setMapParameters,A=Object(a.useCallback)((function(){var e=document.getElementById("districtionSelect");P(e),P(e.previousElementSibling,e.value),Object(k.registerLocale)("zh-TW",w.a)}),[]);Object(a.useEffect)((function(){A(),v({dist:D("districtionSelect"),workingState:D("workingStateSelect")})}),[A]);var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.value;e.dataset.chosen=t},T=function(e){var t="number"===typeof e?e.toString():e;return 1===t.length&&(t="0"+t),t},I=function(){M({center:{lat:24.1512535,lng:120.6617366},polygon:null,zoom:12+Math.random()/1e4,selectMarker:N.selectMarker,closeInfoWindow:!0})},D=function(e){var t=document.getElementById(e),n=null;if(null===t)n="\u8f09\u5165\u4e2d";else{if(n=t.value,"workingStateSelect"===e)switch(n){case"0":n="\u5168\u6848\u4ef6";break;case"\u662f":n="\u65bd\u5de5\u4e2d";break;case"\u5426":n="\u672a\u65bd\u5de5"}"districtionSelect"===e&&"0"===n&&(n="\u5168\u5730\u5340")}return n},B=function(e){var t=null;switch(e){case 0:t="\u5168\u6848\u4ef6";break;case"\u662f":t="\u65bd\u5de5\u4e2d";break;case"\u5426":t="\u672a\u65bd\u5de5"}return t},E=Array.from({length:O.workingState.length},(function(e,t){return t})),_=Array.from({length:O.distriction.length},(function(e,t){return t}));return Object(g.jsxs)("div",{className:"selectors",children:[Object(g.jsxs)("div",{className:"selectContainer",children:[Object(g.jsx)("i",{className:"selectArrow fas fa-chevron-down"}),Object(g.jsxs)("select",{name:"workingState",id:"workingStateSelect",defaultValue:"\u662f",onChange:function(e){var t=x.distriction,n=0===Number(e.target.value)?0:e.target.value,a=null===x.date.start?null:Object(i.a)({},x.date.start),r=null===x.date.end?null:Object(i.a)({},x.date.end),c=p,o=x.stack;P(e.target),P(e.target.previousElementSibling,e.target.value),v((function(e){return Object(i.a)(Object(i.a)({},e),{},{workingState:B(n)})})),-1===o.indexOf("workingState")?o.push("workingState"):0===n&&(o=o.filter((function(e){return"workingState"!==e}))),I(),S(0),j(""!==c?"".concat(a.year,"/").concat(T(a.month),"/").concat(T(a.day)," - ").concat(r.year,"/").concat(T(r.month),"/").concat(T(r.day)):""),C({workingState:n,distriction:t,date:{start:null===a?null:Object(i.a)({},a),end:null===r?null:Object(i.a)({},r)},stack:o})},children:[Object(g.jsx)("option",{value:0,children:"\u5168\u6848\u4ef6"}),E.map((function(e){return Object(g.jsx)("option",{value:O.workingState[e],children:"\u662f"===O.workingState[e]?"\u65bd\u5de5\u4e2d":"\u672a\u65bd\u5de5"},O.workingState[e])}))]}),Object(g.jsx)("span",{children:f.workingState})]}),Object(g.jsxs)("div",{className:"selectContainer",children:[Object(g.jsx)("i",{className:"selectArrow fas fa-chevron-down"}),Object(g.jsxs)("select",{name:"distriction",id:"districtionSelect",defaultValue:"0",onChange:function(e){var t=0===Number(e.target.value)?0:e.target.value,n=x.workingState,a=null===x.date.start?null:Object(i.a)({},x.date.start),r=null===x.date.end?null:Object(i.a)({},x.date.end),c=p,o=x.stack;P(e.target),P(e.target.previousElementSibling,e.target.value),v((function(e){return Object(i.a)(Object(i.a)({},e),{},{dist:0===t?"\u5168\u5730\u5340":t})})),-1===o.indexOf("distriction")?o.push("distriction"):0===t&&(o=o.filter((function(e){return"distriction"!==e}))),I(),S(0),j(""!==c?"".concat(a.year,"/").concat(T(a.month),"/").concat(T(a.day)," - ").concat(r.year,"/").concat(T(r.month),"/").concat(T(r.day)):""),C({workingState:n,distriction:t,date:{start:null===a?null:Object(i.a)({},a),end:null===r?null:Object(i.a)({},r)},stack:o})},children:[Object(g.jsx)("option",{value:0,children:"\u5168\u5730\u5340"}),_.map((function(e){return Object(g.jsx)("option",{value:O.distriction[e],children:O.distriction[e]},O.distriction[e])}))]}),Object(g.jsx)("span",{children:f.dist})]}),Object(g.jsx)(y.a,{value:p,locale:"zh-TW",wrapperClassName:"dateSelectContainer",className:"dateSelect",placeholderText:"\u65e5\u671f\u7bc4\u570d",dateFormat:"yyyy/MM/dd",selectsRange:!0,startDate:s,endDate:l,minDate:new Date(Object.values(O.date.start)),maxDate:new Date(Object.values(O.date.end)),isClearable:!0,shouldCloseOnSelect:!1,onChange:function(e){if(c(e),null===e[0]||null!==e[1]){if(null===e[0]&&null===e[1]){var t=x.stack,n=x.distriction,a=x.workingState;return t=t.filter((function(e){return"date"!==e})),I(),j(""),void C({workingState:a,distriction:n,date:{start:null,end:null},stack:t})}var r=x.distriction,o=x.workingState,s={year:e[0].getFullYear(),month:e[0].getMonth()+1,day:e[0].getDate()},l={year:e[1].getFullYear(),month:e[1].getMonth()+1,day:e[1].getDate()},d=x.stack;-1===d.indexOf("date")&&d.push("date"),I(),S(0),j("".concat(s.year,"/").concat(T(s.month),"/").concat(T(s.day)," - ").concat(l.year,"/").concat(T(l.month),"/").concat(T(l.day))),C({workingState:o,distriction:r,date:{start:Object(i.a)({},s),end:Object(i.a)({},l)},stack:d})}else j("".concat(e[0].getFullYear(),"/").concat(T(e[0].getMonth()+1),"/").concat(T(e[0].getDate())," -"))},onFocus:function(e){return e.target.blur()}})]})}),S=function(e){var t=e.closeInfoBlock,n=e.handleCloseClick,r=e.isMobile,c=Object(a.useState)(0),o=Object(m.a)(c,2),s=o[0],i=o[1],l=Object(a.useState)(10),d=Object(m.a)(l,2),u=d[0],p=d[1];Object(a.useEffect)((function(){if("loading"===e.value||e.isLoading){p(10);var t=setInterval((function(){p((function(e){return e<=1?(clearInterval(t),0):e-1}))}),1e3);return function(){return clearInterval(t)}}}),[e.value,e.isLoading]);var j=Object(a.useMemo)((function(){var t=0;if(null!==e.value)return t=e.value.length>1?e.value[s].length:1===e.value.length?e.value[0].length:0,Array.from({length:t},(function(e,t){return t}))}),[e.value,s]),h=function(t){t>e.value.length-1||t<0||(document.getElementById("topAnchor").scrollIntoView(!1),i(t))},b=function(e){var t="";return null===e?t="hide":!0===e?t="close":!1===e&&(t="open"),t};if("loading"===e.value||e.isLoading)return Object(g.jsx)("div",{className:"infoBlockContainer",children:Object(g.jsx)("div",{className:"infoBlock",style:{paddingTop:"0",backgroundColor:"#ececec"},children:Object(g.jsxs)("div",{className:"loading",children:[Object(g.jsx)("i",{className:"fas fa-circle-notch fa-lg",style:{animation:"spin 2s linear infinite",color:"#3498db"}}),Object(g.jsxs)("div",{style:{marginTop:"15px",textAlign:"center"},children:[Object(g.jsx)("p",{style:{margin:"0 0 8px 0",color:"#555",fontSize:"16px",fontWeight:"500"},children:"\u8f09\u5165\u8cc7\u6599\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5148\u79fb\u52d5\u5730\u5716..."}),Object(g.jsx)("div",{style:{fontSize:"14px",color:"#888",background:"linear-gradient(90deg, #3498db 0%, #2ecc71 50%, #3498db 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:"bold",animation:"textShimmer 2s ease-in-out infinite"},children:u>0?"\u9810\u8a08\u9084\u9700 ".concat(u," \u79d2"):"\u5373\u5c07\u5b8c\u6210..."}),Object(g.jsx)("div",{style:{width:"80%",height:"4px",backgroundColor:"#ddd",borderRadius:"2px",margin:"10px auto",overflow:"hidden"},children:Object(g.jsx)("div",{style:{height:"100%",backgroundColor:"#3498db",borderRadius:"2px",width:"".concat((10-u)/10*100,"%"),transition:"width 1s ease-in-out",background:"linear-gradient(90deg, #3498db, #2ecc71)",animation:"progressGlow 2s ease-in-out infinite"}})})]})]})})});if(null===e.value)return Object(g.jsx)("div",{className:"infoBlockContainer",children:Object(g.jsx)("div",{className:"infoBlock",children:Object(g.jsxs)("div",{className:"noContent",children:[Object(g.jsx)("div",{className:"exclamationMark",children:Object(g.jsx)("i",{className:"fas fa-exclamation-triangle fa-lg"})}),Object(g.jsx)("div",{children:"\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u5728\u8a66"})]})})});if(0===e.length)return Object(g.jsx)("div",{className:"infoBlockContainer ".concat(b(t)),children:Object(g.jsxs)("div",{className:"infoBlock",children:[Object(g.jsx)(x,{handleCloseClick:n}),Object(g.jsx)("div",{className:"toolbarContainer",children:Object(g.jsx)(C,{options:e.option,condition:e.condition,mapParameters:e.mapParameters,setCondition:e.setCondition,setMapParameters:e.setMapParameters,setPageIndex:i})}),Object(g.jsx)("div",{className:"cardsListContainer",children:Object(g.jsx)("div",{className:"cardsList",children:Object(g.jsx)("div",{className:"noContent",children:"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u8cc7\u6599"})})})]})});var f=Array.from({length:e.value.length},(function(e,t){return t}));return Object(g.jsx)("div",{className:"infoBlockContainer ".concat(b(t)),children:Object(g.jsxs)("div",{className:"infoBlock",children:[Object(g.jsx)(x,{handleCloseClick:n}),Object(g.jsx)("div",{className:"toolbarContainer",children:Object(g.jsx)(C,{options:e.option,condition:e.condition,setCondition:e.setCondition,setPageIndex:i,mapParameters:e.mapParameters,setMapParameters:e.setMapParameters})}),Object(g.jsx)("div",{className:"cardsListContainer",children:Object(g.jsxs)("div",{className:"cardsList",children:[Object(g.jsx)(N,{pageBtns:f,pageIndex:s,handlePaginationClick:h,isMobile:r}),Object(g.jsx)("div",{id:"topAnchor",style:{marginBottom:"2em"}}),j.map((function(t){return Object(g.jsx)(O,{value:e.value[s][t],setMapParameters:e.setMapParameters},"card"+(10*s+t+1))})),Object(g.jsx)(N,{pageBtns:f,pageIndex:s,handlePaginationClick:h,isMobile:r})]})})]})})},M=function(e){var t=e.closeInfoBlock,n=e.makerMessage,a=e.handleCloseClick,r=e.handleMakerMessageClick,c=e.userLocation,o=e.mapParameters,s=e.setMapParameters;return Object(g.jsxs)("div",{className:"infoButtonContainer ".concat(!1!==t&&!0!==n?"open":"close"),children:[Object(g.jsx)("div",{className:"button",onClick:a,children:Object(g.jsx)("i",{className:"fas fa-search fa-lg"})}),Object(g.jsx)("div",{className:"button",onClick:function(){var e=Math.random()/1e6;s({center:{lat:c.lat+e,lng:c.lng+e},polygon:o.polygon,zoom:o.zoom,selectMarker:o.selectMarker,closeInfoWindow:!1})},style:{display:null===c?"none":""},children:Object(g.jsx)("i",{className:"fas fa-map-marker-alt fa-lg"})}),Object(g.jsx)("div",{className:"button",onClick:function(){r()},children:Object(g.jsx)("i",{className:"fas fa-info fa-lg"})})]})},A=function(e){var t=e.makerMessage,n=e.handleMakerMessageClick;return Object(g.jsx)("div",{className:"infoBlockContainer ".concat(function(e){var t="";return null===e?t="hide":!0===e?t="open":!1===e&&(t="close"),t}(t)),children:Object(g.jsxs)("div",{className:"infoBlock maker",children:[Object(g.jsx)(x,{handleMakerMessageClick:n}),Object(g.jsx)("div",{className:"makerMessage flex",children:Object(g.jsx)("div",{})})]})})};var P=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,r,c,o,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:2,console.log("\ud83d\udce1 SimpleFetch \u958b\u59cb\u6293\u53d6:",t),a=Array.isArray(t)?t:[t],r=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,e.prev=1,console.log("\ud83d\udce5 \u5617\u8a66\u7b2c ".concat(a," \u6b21\u6293\u53d6: ").concat(t)),e.next=5,fetch(t,{method:"GET",mode:"cors",headers:{Accept:"application/json"}});case 5:if(c=e.sent,console.log("\ud83d\udce5 \u6536\u5230\u56de\u61c9 ".concat(t,":"),c.status,c.statusText),c.ok){e.next=9;break}throw new Error("HTTP error! status: ".concat(c.status));case 9:return e.abrupt("return",c.json());case 12:if(e.prev=12,e.t0=e.catch(1),console.log("\u274c \u7b2c ".concat(a," \u6b21\u5617\u8a66\u5931\u6557:"),e.t0.message),!(a<=n)){e.next=20;break}return console.log("\ud83d\udd04 \u7b49\u5f85 2 \u79d2\u5f8c\u91cd\u8a66..."),e.next=19,new Promise((function(e){return setTimeout(e,2e3)}));case 19:return e.abrupt("return",r(t,a+1));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),c=a.map((function(e){return r(e)})),e.prev=5,e.next=8,Promise.all(c);case 8:return o=e.sent,console.log("\u2705 SimpleFetch \u6210\u529f:",o),e.abrupt("return",o.flat());case 13:return e.prev=13,e.t0=e.catch(5),console.error("\u274c SimpleFetch \u6700\u7d42\u5931\u6557:",e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,r,c,o,s,i,l,u,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02\u5c08\u7528 Fetcher \u958b\u59cb:",t),e.prev=1,e.next=4,fetch(t,{method:"GET",mode:"cors"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(n.status));case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("\u2705 \u53f0\u5317\u5e02\u8cc7\u6599\u8f09\u5165\u6210\u529f"),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(1),console.log("\u274c \u53f0\u5317\u5e02\u76f4\u63a5\u6293\u53d6\u5931\u6557\uff0c\u5617\u8a66\u5099\u7528\u65b9\u6848:",e.t0.message),r=0,c=["https://api.allorigins.win/get?url=","https://corsproxy.io/?","https://cors-anywhere.herokuapp.com/"];case 19:if(!(r<c.length)){e.next=59;break}if(o=c[r],e.prev=21,console.log("\ud83d\udd04 \u5617\u8a66\u4ee3\u7406: ".concat(o)),s=void 0,i=void 0,!o.includes("allorigins")){e.next=40;break}return s=o+encodeURIComponent(t),e.next=29,fetch(s);case 29:if(!(i=e.sent).ok){e.next=38;break}return e.next=33,i.json();case 33:if(!(l=e.sent).contents){e.next=38;break}return u=JSON.parse(l.contents),console.log("\u2705 \u53f0\u5317\u5e02\u5099\u7528\u65b9\u6848\u6210\u529f (allorigins)"),e.abrupt("return",u);case 38:e.next=50;break;case 40:return s=o+encodeURIComponent(t),e.next=43,fetch(s);case 43:if(!(i=e.sent).ok){e.next=50;break}return e.next=47,i.json();case 47:return m=e.sent,console.log("\u2705 \u53f0\u5317\u5e02\u5099\u7528\u65b9\u6848\u6210\u529f"),e.abrupt("return",m);case 50:e.next=56;break;case 52:return e.prev=52,e.t1=e.catch(21),console.log("\u274c \u4ee3\u7406\u5931\u6557: ".concat(o),e.t1.message),e.abrupt("continue",56);case 56:r++,e.next=19;break;case 59:return console.log("\u274c \u6240\u6709\u53f0\u5317\u5e02\u6293\u53d6\u65b9\u6848\u90fd\u5931\u6557"),e.abrupt("return",[]);case 61:case"end":return e.stop()}}),e,null,[[1,14],[21,52]])})));return function(t){return e.apply(this,arguments)}}(),I=Object.freeze({applicationId:"\u7533\u8acb\u66f8\u7de8\u865f",permitId:"\u8a31\u53ef\u8b49\u7de8\u865f",startDate:"\u6838\u51c6\u8d77\u65e5\u671f",endDate:"\u6838\u51c6\u8fc4\u65e5\u671f",applicantUnit:"\u7533\u8acb\u55ae\u4f4d",projectName:"\u5de5\u7a0b\u540d\u7a31",caseType:"\u6848\u4ef6\u985e\u5225",pipeType:"\u7ba1\u7dda\u5de5\u7a0b\u985e\u5225",district:"\u5340\u57df\u540d\u7a31",location:"\u5730\u9ede",isStarted:"\u662f\u5426\u958b\u5de5",contactName:"\u627f\u8fa6\u4eba",contactPhone:"\u627f\u8fa6\u4eba\u96fb\u8a71",contractorName:"\u5ee0\u5546\u540d\u7a31",contractorPhone:"\u5ee0\u5546\u96fb\u8a71",lng:"\u7d93\u5ea6",lat:"\u7def\u5ea6",geometry:"\u65bd\u5de5\u7bc4\u570d\u5750\u6a19"}),D=Object.freeze({projectPurpose:"NPurp",projectName:"NPurp",startDate:"Cb_Da",endDate:"Ce_Da",district:"C_Name",location:"Addr",contractorName:"App_Name",contractorCompany:"Tc_Na",x:"X",y:"Y"}),B=Object.freeze({projectName:"cnstRoad",dateRange:"cnstDate",contractorName:"contractor",contractorPhone:"contractorPhone",permitId:"pmtNo",lat:"lat",lng:"lng"}),E=n(36);E.a.defs("TWD97","+proj=tmerc +lat_0=0 +lon_0=121 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),E.a.defs("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");var _={taichung:{name:"\u53f0\u4e2d\u5e02",apiUrl:"https://datacenter.taichung.gov.tw/swagger/OpenData/d5adb71a-00bb-4573-b67e-ffdccfc7cd27",keyMap:I,fetcher:T,parser:function(e){console.log("\ud83c\udfd9\ufe0f \u53f0\u4e2d\u5e02\u89e3\u6790\u55ae\u500b\u9805\u76ee:",e);var t=function(e){if(!e)return null;if(!/^POLYGON\(\(.*\)\)$/.test(e.replace(/\s/g,"")))return null;try{return e.replace(/\s/g,"").split("POLYGON((")[1].split("))")[0].split(",").map((function(e){var t=e.split("24."),n=Object(m.a)(t,2),a=n[0],r=n[1];return{lat:Number("24."+r),lng:Number(a)}}))}catch(t){return console.log("\u274c \u53f0\u4e2d\u5e02\u591a\u908a\u5f62\u89e3\u6790\u932f\u8aa4:",t),null}},n=function(e){return console.log("\ud83d\udcc5 \u53f0\u4e2d\u5e02\u89e3\u6790\u65e5\u671f:",e),e&&7===e.length?{year:Number(e.substring(0,3))+1911,month:Number(e.substring(3,5)),day:Number(e.substring(5))}:{year:2025,month:7,day:2}},a=e[I.lng],r=e[I.lat],c=Number(a),o=Number(r);if(console.log("\ud83d\uddfa\ufe0f \u53f0\u4e2d\u5e02\u539f\u59cb\u5ea7\u6a19 (WGS84):",{lat:o,lng:c,lngStr:a,latStr:r}),!a||!r||""===a||""===r||!isFinite(c)||!isFinite(o)){console.log("\u274c \u53f0\u4e2d\u5e02\u5ea7\u6a19\u8cc7\u6599\u70ba\u7a7a\uff0c\u4f7f\u7528\u9810\u8a2d\u5ea7\u6a19:",{lngStr:a,latStr:r});var s={city:"\u53f0\u4e2d\u5e02",title:e[I.projectName]||"\u9053\u8def\u5de5\u7a0b",distriction:e[I.district]||"\u672a\u77e5\u5340\u57df",address:e[I.location]||"\u672a\u77e5\u5730\u5740",pipeType:e[I.pipeType]||"\u9053\u8def\u65bd\u5de5",constructionType:e[I.caseType]||"\u9053\u8def\u5de5\u7a0b",workingState:e[I.isStarted]||"\u672a\u77e5",date:{start:n(e[I.startDate]),end:n(e[I.endDate])},applicationNumber:e[I.applicationId]||"N/A",licenseNumber:e[I.permitId]||"N/A",applicant:e[I.applicantUnit]||"N/A",contractor:{name:e[I.contractorName]||"N/A",phone:e[I.contractorPhone]||"N/A"},personInCharge:{name:e[I.contactName]?e[I.contactName].substring(0,1)+"\u25ef\u25ef":"N/A",phone:e[I.contactPhone]||"N/A"},coordinate:{lat:24.163+.1*(Math.random()-.5),lng:120.673+.1*(Math.random()-.5),polygon:t(e[I.geometry])}};return console.log("\ud83d\udd27 \u53f0\u4e2d\u5e02\u4f7f\u7528\u9810\u8a2d\u5ea7\u6a19\u7684\u89e3\u6790\u7d50\u679c:",s),s}if(c<120||c>122||o<23||o>25)return console.log("\u26a0\ufe0f \u53f0\u4e2d\u5e02\u5ea7\u6a19\u8d85\u51fa\u7bc4\u570d\uff0c\u4f7f\u7528\u9810\u8a2d\u5ea7\u6a19:",{lng:c,lat:o}),{city:"\u53f0\u4e2d\u5e02",title:e[I.projectName]||"\u9053\u8def\u5de5\u7a0b",distriction:e[I.district]||"\u672a\u77e5\u5340\u57df",address:e[I.location]||"\u672a\u77e5\u5730\u5740",pipeType:e[I.pipeType]||"\u9053\u8def\u65bd\u5de5",constructionType:e[I.caseType]||"\u9053\u8def\u5de5\u7a0b",workingState:e[I.isStarted]||"\u672a\u77e5",date:{start:n(e[I.startDate]),end:n(e[I.endDate])},applicationNumber:e[I.applicationId]||"N/A",licenseNumber:e[I.permitId]||"N/A",applicant:e[I.applicantUnit]||"N/A",contractor:{name:e[I.contractorName]||"N/A",phone:e[I.contractorPhone]||"N/A"},personInCharge:{name:e[I.contactName]?e[I.contactName].substring(0,1)+"\u25ef\u25ef":"N/A",phone:e[I.contactPhone]||"N/A"},coordinate:{lat:24.163+.1*(Math.random()-.5),lng:120.673+.1*(Math.random()-.5),polygon:t(e[I.geometry])}};console.log("\u2705 \u53f0\u4e2d\u5e02\u6709\u6548\u5ea7\u6a19 (WGS84):",{lat:o,lng:c});var i={city:"\u53f0\u4e2d\u5e02",title:e[I.projectName]||"\u9053\u8def\u5de5\u7a0b",distriction:e[I.district]||"\u672a\u77e5\u5340\u57df",address:e[I.location]||"\u672a\u77e5\u5730\u5740",pipeType:e[I.pipeType]||"\u9053\u8def\u65bd\u5de5",constructionType:e[I.caseType]||"\u9053\u8def\u5de5\u7a0b",workingState:e[I.isStarted]||"\u672a\u77e5",date:{start:n(e[I.startDate]),end:n(e[I.endDate])},applicationNumber:e[I.applicationId]||"N/A",licenseNumber:e[I.permitId]||"N/A",applicant:e[I.applicantUnit]||"N/A",contractor:{name:e[I.contractorName]||"N/A",phone:e[I.contractorPhone]||"N/A"},personInCharge:{name:e[I.contactName]?e[I.contactName].substring(0,1)+"\u25ef\u25ef":"N/A",phone:e[I.contactPhone]||"N/A"},coordinate:{lat:o,lng:c,polygon:t(e[I.geometry])}};return console.log("\u2728 \u53f0\u4e2d\u5e02\u89e3\u6790\u7d50\u679c:",i),i},isDisabled:!1},taipei:{name:"\u53f0\u5317\u5e02",apiUrl:"https://tpnco.blob.core.windows.net/blobfs/Todaywork.json",keyMap:D,fetcher:T,parser:function(e){console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02\u89e3\u6790\u55ae\u500b\u9805\u76ee:",e);var t=e.properties,n=e.geometry;console.log("\ud83d\udccb Properties:",t),console.log("\ud83d\udccd Geometry:",n);var a=function(e){return console.log("\ud83d\udcc5 \u89e3\u6790\u65e5\u671f:",e),e&&9===e.length?{year:parseInt(e.substring(0,3),10)+1911,month:parseInt(e.substring(4,6),10),day:parseInt(e.substring(7,9),10)}:{year:2025,month:7,day:2}},r=a(t[D.startDate]),c=a(t[D.endDate]),o=parseFloat(n.coordinates[0]),s=parseFloat(n.coordinates[1]);console.log("\ud83d\uddfa\ufe0f \u539f\u59cb\u5750\u6a19 (TWD97):",{x:o,y:s});var i=function(e,t){if("number"!==typeof e||"number"!==typeof t)return console.error("Invalid coordinates for conversion"),{lat:0,lng:0};var n=Object(E.a)("TWD97","WGS84",[e,t]),a=Object(m.a)(n,2),r=a[0];return{lat:a[1],lng:r}}(o,s),l=i.lat,d=i.lng;console.log("\ud83c\udf0d \u8f49\u63db\u5f8c\u5750\u6a19 (WGS84):",{lat:l,lng:d});var u={city:"\u53f0\u5317\u5e02",title:t[D.projectName]||t[D.projectPurpose]||"\u9053\u8def\u5de5\u7a0b",distriction:t[D.district]||"\u672a\u77e5\u5340\u57df",address:t[D.location]||"\u672a\u77e5\u5730\u5740",pipeType:"\u9053\u8def\u65bd\u5de5",constructionType:t[D.projectPurpose]||"\u9053\u8def\u5de5\u7a0b",workingState:"\u662f",date:{start:r,end:c},applicationNumber:"N/A",licenseNumber:"N/A",applicant:t[D.contractorName]||"N/A",contractor:{name:t[D.contractorCompany]||t[D.contractorName]||"N/A",phone:"N/A"},personInCharge:{name:"N/A",phone:"N/A"},coordinate:{lat:l,lng:d,polygon:null}};return console.log("\u2728 \u53f0\u5317\u5e02\u89e3\u6790\u7d50\u679c:",u),u},isDisabled:!1},kaohsiung:{name:"\u9ad8\u96c4\u5e02",apiUrl:"https://corsproxy.io/?https://data.kcg.gov.tw/Json/Get/d636aa85-4b08-42ab-a742-4f2aad070450",keyMap:B,fetcher:P,parser:function(e){return console.log("\ud83c\udfed \u9ad8\u96c4\u5e02\u89e3\u6790\u539f\u59cb\u8cc7\u6599:",e),e&&e.Data&&Array.isArray(e.Data)?(console.log("\ud83d\udcca \u9ad8\u96c4\u5e02 Data \u9663\u5217\u9577\u5ea6:",e.Data.length),e.Data.map((function(e,t){console.log("\ud83d\udd04 \u8655\u7406\u9ad8\u96c4\u5e02\u7b2c ".concat(t+1," \u7b46\u8cc7\u6599:"),e);var n=function(e){if(console.log("\ud83d\udcc5 \u9ad8\u96c4\u5e02\u89e3\u6790\u65e5\u671f:",e),!e)return{year:2025,month:7,day:2};var t=new Date(e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}(e[B.dateRange]),a={city:"\u9ad8\u96c4\u5e02",title:e[B.projectName]||"\u672a\u77e5\u5de5\u7a0b",distriction:"N/A",address:e[B.projectName]||"\u672a\u77e5\u5730\u5740",pipeType:"\u9053\u8def\u65bd\u5de5",constructionType:"\u9053\u8def\u5de5\u7a0b",workingState:"\u662f",date:{start:n,end:n},applicationNumber:"N/A",licenseNumber:e[B.permitId]||"N/A",applicant:e[B.contractorName]||"N/A",contractor:{name:e[B.contractorName]||"N/A",phone:e[B.contractorPhone]||"N/A"},personInCharge:{name:"N/A",phone:"N/A"},coordinate:{lat:Number(e[B.lat])||0,lng:Number(e[B.lng])||0,polygon:null}};return console.log("\u2728 \u9ad8\u96c4\u5e02\u7b2c ".concat(t+1," \u7b46\u89e3\u6790\u7d50\u679c:"),a),a}))):(console.log("\u274c \u9ad8\u96c4\u5e02\u8cc7\u6599\u683c\u5f0f\u932f\u8aa4"),[])},isDisabled:!0}},z=function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(m.a)(c,2),l=o[0],p=o[1],j=Object(a.useState)(null),h=Object(m.a)(j,2),b=h[0],f=h[1],O=Object(a.useState)(null),x=Object(m.a)(O,2),N=x[0],k=x[1],y=Object(a.useState)("loading"),w=Object(m.a)(y,2),C=w[0],P=w[1],T=Object(a.useState)({workingState:"\u662f",distriction:0,date:{start:null,end:null},stack:["workingState"]}),I=Object(m.a)(T,2),D=I[0],B=I[1],E=Object(a.useState)({center:{lat:25.033,lng:121.5654},polygon:null,zoom:12,selectMarker:null,closeInfoWindow:null}),z=Object(m.a)(E,2),W=z[0],L=z[1],F=Object(a.useCallback)((function(){var e;U(),e=Y(428),window.addEventListener("resize",U),window.addEventListener("resize",(function(){return Y(428)})),G(),R(e)}),[]),G=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){!function(e){var t={center:{lat:e.coords.latitude,lng:e.coords.longitude},polygon:null,zoom:12,selectMarker:null,closeInfoWindow:null};L(t),p(t.center)}(e)})):console.log("geolocation is not available")},R=function(e){!1===e&&f(!1)},U=function(){document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px"))},Y=function(e){var t=null;return t=window.innerWidth<=e,r(t),t},J=function(e){var t=Object.values(e),n=Object(m.a)(t,3),a=n[0],r=n[1],c=n[2];return a=a.toString(),r=r.toString(),c=c.toString(),1===r.length&&(r="0"+r),1===c.length&&(c="0"+c),parseInt(a+r+c,10)},H=function(e){for(var t=e,n=[],a=0;a<t.length;a+=10)n.push(t.slice(a,a+10));return n},V=Object(a.useCallback)(Object(u.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\ud83d\ude80 \u958b\u59cb\u6293\u53d6\u8cc7\u6599..."),P("loading"),t=Object.values(_).filter((function(e){return!e.isDisabled})),console.log("\ud83d\udccd \u555f\u7528\u7684\u57ce\u5e02:",t.map((function(e){return e.name}))),n=t.map(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83d\udce1 \u6b63\u5728\u6293\u53d6 ".concat(t.name," \u7684\u8cc7\u6599..."),t.apiUrl),e.next=4,t.fetcher(t.apiUrl);case 4:return n=e.sent,console.log("\u2705 ".concat(t.name," \u539f\u59cb\u8cc7\u6599:"),n),"\u53f0\u5317\u5e02"===t.name?(console.log("\ud83c\udfd9\ufe0f \u53f0\u5317\u5e02 features \u6578\u91cf:",(null===n||void 0===n||null===(r=n.features)||void 0===r?void 0:r.length)||0),n&&n.features&&Array.isArray(n.features)?a=n.features.map(t.parser):(console.log("\u26a0\ufe0f \u53f0\u5317\u5e02\u8cc7\u6599\u683c\u5f0f\u7570\u5e38\uff0c\u8df3\u904e\u89e3\u6790"),a=[])):"\u9ad8\u96c4\u5e02"===t.name?(console.log("\ud83c\udfed \u9ad8\u96c4\u5e02 Data \u6578\u91cf:",(null===n||void 0===n||null===(c=n.Data)||void 0===c?void 0:c.length)||0),a=t.parser(n)):"\u53f0\u4e2d\u5e02"===t.name?(console.log("\ud83c\udfd8\ufe0f \u53f0\u4e2d\u5e02\u8cc7\u6599\u9577\u5ea6:",(null===n||void 0===n?void 0:n.length)||0),Array.isArray(n)?(a=n.map(t.parser),console.log("\u2728 \u53f0\u4e2d\u5e02\u89e3\u6790\u5f8c\u8cc7\u6599\u6578\u91cf:",a.length)):(console.log("\u26a0\ufe0f \u53f0\u4e2d\u5e02\u8cc7\u6599\u683c\u5f0f\u7570\u5e38\uff0c\u8df3\u904e\u89e3\u6790"),a=[])):(console.log("\ud83c\udfd8\ufe0f ".concat(t.name," \u8cc7\u6599\u9577\u5ea6:"),(null===n||void 0===n?void 0:n.length)||0),a=Array.isArray(n)?n.map(t.parser):[]),console.log("\u2728 ".concat(t.name," \u89e3\u6790\u5f8c\u8cc7\u6599:"),a),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),console.error("\u274c ".concat(t.name," \u6293\u53d6\u5931\u6557:"),e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.allSettled(n);case 7:a=e.sent,console.log("\ud83c\udfaf Promise.allSettled \u7d50\u679c:",a),r=a.filter((function(e){return"fulfilled"===e.status})).flatMap((function(e){return e.value})),console.log("\ud83d\udcca \u5408\u4f75\u5f8c\u7684\u6240\u6709\u8cc7\u6599:",r),console.log("\ud83d\udcc8 \u7e3d\u8cc7\u6599\u7b46\u6578:",r.length),0===r.length?(console.log("\u26a0\ufe0f \u6c92\u6709\u8cc7\u6599\uff0c\u8a2d\u5b9a\u70ba null"),P(null)):(console.log("\ud83c\udf89 \u8a2d\u5b9a\u8cc7\u6599\u5b8c\u6210"),P(r));case 13:case"end":return e.stop()}}),e)}))),[]);Object(a.useEffect)((function(){F(),V()}),[F,V]);var Z=Object(a.useMemo)((function(){return function(e){var t=C,n=[];if(null===t||"loading"===t)n=t;else if(3===e.stack.length)n=t.filter((function(t){return(J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end))&&t.workingState===e.workingState&&t.distriction===e.distriction}));else if(2===e.stack.length)if(-1!==e.stack.indexOf("date")){var a=e.stack[1-e.stack.indexOf("date")];n=t.filter((function(t){return(J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end))&&t[a]===e[a]}))}else n=t.filter((function(t){return t.workingState===e.workingState&&t.distriction===e.distriction}));else 1===e.stack.length&&(0!==e.distriction?n=t.filter((function(t){return t.distriction===e.distriction})):null!==e.date.start&&null!==e.date.end?n=t.filter((function(t){return J(e.date.start)>=J(t.date.start)&&J(e.date.start)<=J(t.date.end)||J(e.date.end)>=J(t.date.start)&&J(e.date.end)<=J(t.date.end)})):0!==e.workingState&&(n=t.filter((function(t){return t.workingState===e.workingState}))));return n}(D)}),[D,C]),K=Object(a.useMemo)((function(){var e={workingState:[],distriction:[],date:{start:{},end:{}}};if(D.stack.length>=0&&"loading"!==C&&null!==C){e.date.start=Object(i.a)({},C[0].date.start),e.date.end=Object(i.a)({},C[0].date.end);var t,n=Object(s.a)(C);try{for(n.s();!(t=n.n()).done;){var a=t.value;-1===e.workingState.indexOf(a.workingState)&&e.workingState.push(a.workingState),-1===e.distriction.indexOf(a.distriction)&&e.distriction.push(a.distriction),J(a.date.start)<=J(e.date.start)&&(e.date.start=Object(i.a)({},a.date.start)),J(a.date.end)>=J(e.date.end)&&(e.date.end=Object(i.a)({},a.date.end))}}catch(r){n.e(r)}finally{n.f()}}return e}),[D.stack,C]),X=function(){var e=b;f(e=null!==e&&!e)},$=function(){var e=N;k(e=null===N||!e)};if("loading"===C||null===C)return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(v,{constructionsData:null,mapParameters:W,setMapParameters:L,closeInfoBlock:b,makerMessage:N,isMobile:n,userLocation:l}),Object(g.jsx)(M,{closeInfoBlock:b,makerMessage:N,handleCloseClick:X,handleMakerMessageClick:$,userLocation:l,mapParameters:W,setMapParameters:L}),Object(g.jsx)(S,{value:[],length:0,option:K,condition:D,mapParameters:W,closeInfoBlock:b,isMobile:n,handleCloseClick:X,setCondition:B,setMapParameters:L,isLoading:!0}),Object(g.jsx)(A,{makerMessage:N,handleMakerMessageClick:$})]});var q=null;return q=0===D.distriction&&null===D.date.start&&null===D.date.end&&0===D.workingState?C:Z,Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(v,{constructionsData:H(q),mapParameters:W,closeInfoBlock:b,setMapParameters:L,makerMessage:N,isMobile:n,userLocation:l}),Object(g.jsx)(M,{closeInfoBlock:b,makerMessage:N,handleCloseClick:X,handleMakerMessageClick:$,userLocation:l,mapParameters:W,setMapParameters:L}),Object(g.jsx)(S,{value:H(q),length:q.length,option:K,condition:D,mapParameters:W,closeInfoBlock:b,isMobile:n,handleCloseClick:X,setCondition:B,setMapParameters:L}),Object(g.jsx)(A,{makerMessage:N,handleMakerMessageClick:$})]})};n(105);o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(z,{})}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.03d62574.chunk.js.map